{"ts":1358356384728,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"function Partida(palavra, segredo, autor) {\n\tthis.palavra = palavra;\n\tthis.segredo = segredo;\n\tthis.id = Math.random() + '.' + new Date().getTime();\n\tthis.criadaPor = autor;\n\tthis.participantes = [];\n\tthis.erros = 0;\n\tthis.terminou = false;\n};\n\nPartida.prototype.adicionarParticipante = function Partida_adicionarParticipante(participante) {\n\tif (this.criadaPor.id !== participante.id) {\n\t\tvar partidaNaoTemJogador = true;\n\t\tfor (var i = 0; i < this.participantes.length; i++) {\n\t\t\tif (this.participantes[i].id == participante.id) {\n\t\t\t\tpartidaNaoTemJogador = false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (partidaNaoTemJogador) {\n\t\t\tthis.participantes.push(participante);\n\t\t\tparticipante.partida = this;\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\nPartida.prototype.finalizar = function Partida_finalizar() {\n\tthis.terminou = true;\n\tvar nomesParticipantes = false;\n\tfor (var i = 0; i < this.participantes.length; i++) {\n\t\tif (nomesParticipantes) {\n\t\t\tnomesParticipantes += ', ' + this.participantes[i].nome;\n\t\t} else {\n\t\t\tnomesParticipantes = this.participantes[i].nome;\n\t\t}\n\t}\n\treturn {\n\t\terros: this.erros,\n\t\tcriadaPor: this.criadaPor.nome,\n\t\tparticipantes: nomesParticipantes,\n\t\tpalavra: this.palavra\n\t};\n};\n\nPartida.prototype.sugerirLetra = function Partida_sugerirLetra(letra, participanteID) {\n\tif (this.terminou) {\n\t\tthrow 'The game has finished.';\n\t}\n\tif (!this.participantes.some(function(participante) { return participante.id === participanteID; })) {\n\t\tthrow 'You must join at this game to guess a letter.';\n\t}\n\tif (this.criadaPor.id === participanteID) {\n\t\tthrow 'The author can not guess a letter.';\n\t}\n\tvar arr = this.segredo.split(''),\n\t\tacertou = false;\n\tfor (var i = 0; i < this.palavra.length; i++) {\n\t\tif (this.palavra.charAt(i) == letra){\n\t\t\tarr[i] = letra;\n\t\t\tacertou = true;\n\t\t}\n\t}\n\tthis.segredo = arr.join('');\n\tif (!acertou) {\n\t\tthis.erros = this.erros + 1;\n\t}\n\treturn acertou;\n};\n\nPartida.prototype.deveFinalizar = function Partida_deveFinalizar() {\n\treturn (this.segredo.indexOf('*') < 0 || this.erros >= 6);\t\n};\n\nPartida.prototype.resumir = function Partida_resumir() {\n\treturn {\n\t\tpartidaID: this.id,\n\t\tsegredo: this.segredo,\n\t\tparticipantes: this.participantes.length,\n\t\tterminou: this.terminou,\n\t\terros: this.erros\n\t};\n};\n\nmodule.exports = {\n\tcriar: function(palavra, segredo, autor) {\n\t\treturn new Partida(palavra, segredo, autor);\n\t}\n}"]],"start1":0,"start2":0,"length1":0,"length2":2353}]],"length":2353}
{"contributors":[],"silentsave":false,"ts":1358356418416,"patch":[[{"diffs":[[0,"turn false;\n};\n\n"],[1,"Partida.prototype.adicionarParticipante = function Partida_removerParticipante(participante) {\n    if (this.criadaPor.id !== participante.id) {\n\t\tvar partidaNaoTemJogador = true;\n\t\tfor (var i = 0; i < this.participantes.length; i++) {\n\t\t\tif (this.participantes[i].id == participante.id) {\n\t\t\t\tpartidaNaoTemJogador = false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (partidaNaoTemJogador) {\n\t\t\tthis.participantes.push(participante);\n\t\t\tparticipante.partida = this;\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\n"],[0,"Partida.prototyp"]],"start1":717,"start2":717,"length1":32,"length2":521}]],"length":2842,"saved":false}
{"ts":1358356527441,"patch":[[{"diffs":[[0,"Jogador = true;\n"],[1,"        var indiceParticipante = null;\n"],[0,"\t\tfor (var i = 0"]],"start1":896,"start2":896,"length1":32,"length2":71},{"diffs":[[0,"\t\t\t\t"],[-1,"partidaNaoTemJogador = false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (partidaNaoTemJogador) {\n\t\t\t"],[1,"indiceParticipante = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (indiceParticipante) {\n\t\t\tdelete "],[0,"this"]],"start1":1061,"start2":1061,"length1":91,"length2":90},{"diffs":[[0,"is.participantes"],[-1,".push(p"],[1,"[indiceP"],[0,"articipante);\n\t\t"]],"start1":1149,"start2":1149,"length1":39,"length2":40},{"diffs":[[0,"diceParticipante"],[-1,")"],[1,"]"],[0,";\n\t\t\tparticipant"]],"start1":1168,"start2":1168,"length1":33,"length2":33}]],"length":2881,"saved":false}
{"ts":1358356541713,"patch":[[{"diffs":[[0,"var "],[-1,"partidaNaoTemJogador = true;\n        var "],[0,"indi"]],"start1":879,"start2":879,"length1":49,"length2":8}]],"length":2840,"saved":false}
{"ts":1358356567702,"patch":[[{"diffs":[[0,"pante.partida = "],[-1,"this"],[1,"null"],[0,";\n\t\t\treturn true"]],"start1":1156,"start2":1156,"length1":36,"length2":36}]],"length":2840,"saved":false}
{"ts":1358356574254,"patch":[[{"diffs":[[0,"null;\n\t\t\treturn "],[-1,"tru"],[1,"participant"],[0,"e;\n\t\t}\n\t}\n\tretur"]],"start1":1172,"start2":1172,"length1":35,"length2":43},{"diffs":[[0,"\n\t\t}\n\t}\n\treturn "],[-1,"fals"],[1,"participant"],[0,"e;\n};\n\nPartida.p"]],"start1":1201,"start2":1201,"length1":36,"length2":43}]],"length":2855,"saved":false}
{"ts":1358356582231,"patch":[[{"diffs":[[0,"a.prototype."],[-1,"adiciona"],[1,"remove"],[0,"rParticipant"]],"start1":739,"start2":739,"length1":32,"length2":30}]],"length":2853,"saved":false}
